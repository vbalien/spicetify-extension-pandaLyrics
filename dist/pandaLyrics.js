var pandaLyrics=(()=>{var e=class{constructor(t){this.port=t}connect(){this.socket=new WebSocket(`ws://localhost:${this.port}/pandaLyrics`),this.socket.addEventListener("open",t=>{Spicetify.showNotification("Panda Lyrics Connected."),clearInterval(this.tickTimer),this.tickTimer=setInterval(this.tick.bind(this),500),this.sendSong()}),this.socket.addEventListener("close",t=>{setTimeout(()=>{this.connect()},1e3)}),this.socket.addEventListener("error",t=>{setTimeout(()=>{this.connect()},1e3)})}tick(){var t,e=Spicetify.Player.getProgress();null!=(t=this.socket)&&t.send(JSON.stringify({type:"tick",data:{time:e}}))}get isReady(){var t;return(null==(t=this.socket)?void 0:t.readyState)===WebSocket.OPEN}sendSong(){var t,e,i=Spicetify.Player.data||Spicetify.Queue;i&&i.track&&((i=i.track.metadata)&&(e=i.title,i=i.artist_name,null!=(t=this.socket)&&t.send(JSON.stringify({type:"songchange",data:{title:e,artist:i}}))))}};var t=async function(){const t=new e(8999);t.connect(),Spicetify.Player.addEventListener("songchange",()=>{t.isReady&&t.sendSong()})};(async()=>{await t()})()})();